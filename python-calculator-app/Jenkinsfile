node {
    // Use the Python installation named 'Python3' configured in Jenkins Global Tool Configuration
    withPythonEnv('Python3') {
        stage('Checkout') {
            checkout scm
        }

        stage('Install dependencies') {
            bat 'python -m pip install --upgrade pip'
            bat 'python -m pip install -r requirements.txt'
        }

        stage('Run Tests') {
            bat 'python -m unittest test_operations.py'
        }

        stage('Run Application') {
            bat 'python main.py'
        }
    }
}
